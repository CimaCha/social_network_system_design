# Проект: Социальная сеть для путешественников
## Что из себя представляет данный проект?
Это социальная сеть для путешественников, где они смогут поделиться своими впечатлениями, советами и интересными особенностями мест, где они уже побывали
### Функциональные требования (MVP)
- Лента постов
  - Посты других пользователей в обратном хронологическом порядке
    - Содержат фотогалерею
    - Содержат поле описания
    - Содержат геометку
    - Содержит кнопку **Комментарии** - открывает список 5 верхних комментариев и дальше подгрузка
    - Содержат поле для комментариев - принимает markdown
    - Содержит кнопку **Оценка** (Лайк)
- Профиль пользователя (личный кабинет)
  - Есть лента постов пользователя в обратном хронологическом порядке
  - Есть список других пользователей, на которых подписан пользователь
  - Есть кнопка **Редактировать**
    - Открывает окно редактирования профиля
- Профиль другого пользователя (личный кабинет)
  - Есть лента постов другого пользователя в обратном хронологическом порядке
  - Есть список других пользователей, на которых подписан пользователь
  - Есть кнопка **Подписаться**
    - Посты другого пользователя появляются в ленте постов подписавшегося
    - В личном кабинете пользователя происходит инкремент кол-ва людей на которых подписан пользователь
- Кнопка **Опубликовать пост**
  - Открывается небольшой редактор, который будет принимать markdown
  - Можно грузить фотографии - png, jpg, jpeg, не более 10 МБ, не более 10 штук на одну публикацию - сжимаем до 1 МБ
  - Можно указывать гео метку места в посте (отдельное модальное окно с гео)
- Карта мира
  - Карту можно двигать мышкой
  - Карту можно зумировать
- Поисковая строка, кнопка "Найти" и тип поиска (страна, место, город, пользователь)
  - Если нажать кнопку Найти - произойдет поиск по карте и зумирование до какого то масштаба (OpenMap, Google ни с одни не работал)
  - Лента постов сбоку фильтруется постами на этом сегменте карты
- Сегмент **Самые популярные места для путешествий**
  - Выводить список мест/стран/городов с наибольшим количеством постов
  - При нажатии на элемент списка делать механизм как поиск через поисковую строку

### Нефункциональные требования
- Аудитория приложения
  - DAU 10 000 000
  - Регионы использования - страны СНГ
  - Целевая аудитория - люди, ведущие активный образ жизни, ведущие социальные сети, путешественники, инфлюенсеры
  - Активность
    - Показанных постов для пользователя - 100
    - Созданных постов пользователем за год - 100 - 28 дней отпуска - по 2-3 поста в день отпуска + какие то активности в течение года
    - Комментариев от пользователя в день - 2
    - Лайков/Сердечек в день от одного пользователя - 10
    - Поисковых запросов в день от одного пользователя - 1
- Особенности приложения
  - Платформы: Andoid/iOS/Desktop/Mobile
  - Сезонность - есть, лето - пляжи, отпуска и тд, зима - горнолыжные курорты, поездки в теплые страны, новогодние каникулы, майские праздники
  - Условия хранения данных - храним всегда, тк нужен доступ к старым постам
  - Доступность: 99,95% - приложение в год будет недоступно менее пяти часов
  - Лимиты и ограничение на одного пользователя в день
    - 1000 просмотренных постов
    - 100 публикации постов
    - 1000 лайков/сердечек
    - 500 комментариев
    - 500 подписок
- Тайминги
  - 1 сек - лента подгружается постепенно
  - 1 сек - публикация поста
  - 1 сек - добавление комментария
  - 0,5 сек - проставление лайка
  - 1 сек - подписка на другого пользователя
  - 3 сек - отработка поискового запроса
### Расчет нагрузки
#### RPS
- Получение ленты (Read)
  10 000 000 х 100 /86400 = 11574
- Публикация постов (Write)
  10 000 000 x 100 / 365 / 86400 = 30
- Комментарии от пользователей
  Допустим открывает комменты половина пользователей
  Read 10 000 000 х 100 х 5 / 2 / 86400 = 28935
  Write 10 000 000 х 2 / 86400 = 231
- Лайки
  Read Каунтер выгружается вместе с постом
  Read Лайк от конкретного пользователя - отдельная ручка, но количество как и постов, которые видит пользователь - 10 000 000 х 100 /86400 = 11574
  Write 10 000 000 х 10 / 86400 = 1157
- Поисковые запросы
  Read 10 000 000 х 5 / 86400 = 115
  Read постов в ленте по результату поиска 10 000 000 х 20 / 86400 = 2314
#### Трафик
##### Просмотр постов в ленте
``` json
{
"id": int, 8 байт
"description": string, 1 Кбайт
"images" []image{id: int, previewUrl: string, fullSizeUrl: string}, 100 байт URL - 8 + 100 + 100 = 208 байт
"likeCount" int, 8 байт
"hasComments": bool 1 байт
"timestamp" string 20 байт
"geo": {
    "altitude":string,
    "longtitude": string
  }
}
```
Traffic = 1245 байт x 11574 = 14 409 КB/s
##### Публикация постов
``` json
{
"id": int, 8 байт
"description": string, 1 Кбайт
"images" []image{id: int, data []byte} (1 МБ + 8 байт) х 10 = 10 Мб
"timestamp" string 20 байт
"geo": {
    "altitude":string,
    "longtitude": string
  }
}
```
Traffic = 10 MB x 30 = 300 MB/s
##### Комментарии от пользователей
``` json
{
"id": int, 8 байт
"description": string, 100 байт
"userId" int 8 байт
"timestamp" string 20 байт
}
```
Read traffic = 136 x 28935 = 3 935 KB/s
Write traffic = 136 x 231 = 31 KB/s
##### Лайки
``` json
{
"isLiked" bool 1 байт
}
```
Read traffic = 1 x 11574 = 11 KB/s
Write traffic = 1 x 1157 = 1 KB/s
##### Поисковые запросы
``` json
{
"SearchString" string 50 байт
}
```
Read traffic = 50 x 115 = 5 KB/s
Read traffic для постов = 1245 х 2314 = 2,8 MB/s
